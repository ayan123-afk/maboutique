<!DOCTYPE html>
<html>
<head>
  <title>E-commerce Products</title>
</head>
<body>
  <h1>All Products</h1>

  <!-- Container for products -->
  <div id="products" style="display:flex; flex-wrap:wrap; gap:20px;"></div>

  <script type="module">
    import { createClient } from "https://esm.sh/@supabase/supabase-js";

    const supabaseUrl = "https://lqpfuwmjtrkpjetepucb.supabase.co";
    const supabaseKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxxcGZ1d21qdHJrcGpldGVwdWNiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMzNTkzNjEsImV4cCI6MjA3ODkzNTM2MX0.ecoBgJ_WWeGOd8RXXkBs2Og477RQsR5iN45HUP_Dlp8";

    const supabase = createClient(supabaseUrl, supabaseKey);

    async function loadProducts() {
      const { data, error } = await supabase.from("products").select("*");

      if (error) {
        console.log(error);
        return;
      }

      const productsDiv = document.getElementById("products");

      data.forEach(p => {
        productsDiv.innerHTML += `
          <div style="border:1px solid #ddd; padding:10px; width:200px;">
            <img src="${p.image_url}" width="180" />
            <h3>${p.title}</h3>
            <p><b>${p.price} PKR</b></p>
            <p>${p.description || ""}</p>
          </div>
        `;
      });
    }

    loadProducts();
  </script>
</body>
</html>
